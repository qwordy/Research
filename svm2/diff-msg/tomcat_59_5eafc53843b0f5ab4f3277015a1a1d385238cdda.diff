commit 5eafc53843b0f5ab4f3277015a1a1d385238cdda
Author: Keiichi Fujino <kfujino@apache.org>
Date:   Thu Sep 26 08:03:03 2013 +0000

    Add support for notify periodic event of cluster.
    
    git-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1526408 13f79535-47bb-0310-9956-ffa450edef68

diff --git a/java/org/apache/catalina/ha/tcp/SimpleTcpCluster.java b/java/org/apache/catalina/ha/tcp/SimpleTcpCluster.java
index 0efd660..74941d5 100644
--- a/java/org/apache/catalina/ha/tcp/SimpleTcpCluster.java
+++ b/java/org/apache/catalina/ha/tcp/SimpleTcpCluster.java
@@ -32,6 +32,7 @@ import org.apache.catalina.Container;
 import org.apache.catalina.Context;
 import org.apache.catalina.Engine;
 import org.apache.catalina.Host;
+import org.apache.catalina.Lifecycle;
 import org.apache.catalina.LifecycleEvent;
 import org.apache.catalina.LifecycleException;
 import org.apache.catalina.LifecycleListener;
@@ -506,6 +507,9 @@ public class SimpleTcpCluster extends LifecycleMBeanBase
 
         //send a heartbeat through the channel
         if ( isHeartbeatBackgroundEnabled() && channel !=null ) channel.heartbeat();
+
+        // periodic event
+        fireLifecycleEvent(Lifecycle.PERIODIC_EVENT, null);
     }
 
 
