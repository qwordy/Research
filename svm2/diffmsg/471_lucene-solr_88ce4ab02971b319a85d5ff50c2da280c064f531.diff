commit 88ce4ab02971b319a85d5ff50c2da280c064f531
Author: Mark Robert Miller <markrmiller@apache.org>
Date:   Sat Dec 29 21:29:11 2012 +0000

    check shutdown for early termination in 'wait for state'
    
    git-svn-id: https://svn.apache.org/repos/asf/lucene/dev/trunk@1426840 13f79535-47bb-0310-9956-ffa450edef68

diff --git a/solr/core/src/java/org/apache/solr/handler/admin/CoreAdminHandler.java b/solr/core/src/java/org/apache/solr/handler/admin/CoreAdminHandler.java
index 48ca1e4..69d0c61 100644
--- a/solr/core/src/java/org/apache/solr/handler/admin/CoreAdminHandler.java
+++ b/solr/core/src/java/org/apache/solr/handler/admin/CoreAdminHandler.java
@@ -941,6 +941,11 @@ public class CoreAdminHandler extends RequestHandlerBase {
                   + state + " live:" + live);
         }
         
+        if (coreContainer.isShutDown()) {
+          throw new SolrException(ErrorCode.BAD_REQUEST,
+              "Solr is shutting down");
+        }
+        
         // solrcloud_debug
 //        try {;
 //        LocalSolrQueryRequest r = new LocalSolrQueryRequest(core, new
